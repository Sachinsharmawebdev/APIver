<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APIver Documentation - Git-like API Versioning</title>
    <style>
        :root {
            --primary-color: #20b2aa;
            --secondary-color: #48d1cc;
            --accent-color: #00ced1;
            --bg-color: #f0fdff;
            --content-bg: #ffffff;
            --sidebar-bg: #ffffff;
            --text-color: #2c3e50;
            --text-secondary: #34495e;
            --border-color: #e1f5fe;
            --shadow: rgba(32, 178, 170, 0.1);
            --code-bg: #f0fdff;
            --command-bg: #e0f7fa;
        }
        
        [data-theme="dark"] {
            --primary-color: #4dd0e1;
            --secondary-color: #26c6da;
            --accent-color: #00acc1;
            --bg-color: #0d1421;
            --content-bg: #1a2332;
            --sidebar-bg: #162029;
            --text-color: #e1f5fe;
            --text-secondary: #b3e5fc;
            --border-color: #263238;
            --shadow: rgba(77, 208, 225, 0.2);
            --code-bg: #263238;
            --command-bg: #1e2a36;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; transition: background-color 0.3s, color 0.3s; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; background: var(--bg-color); color: var(--text-color); }
        
        .header { background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; padding: 20px 0; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px var(--shadow); }
        .theme-toggle { background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 12px; border-radius: 20px; cursor: pointer; font-size: 16px; transition: all 0.3s; }
        .theme-toggle:hover { background: rgba(255,255,255,0.3); }
        .header-content { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .logo { font-size: 1.8em; font-weight: bold; }
        .search-box { position: relative; }
        .search-box input { padding: 8px 40px 8px 15px; border: none; border-radius: 20px; width: 300px; font-size: 14px; }
        .search-box button { position: absolute; right: 5px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 5px; }
        
        .container { display: flex; max-width: 1200px; margin: 0 auto; min-height: calc(100vh - 80px); }
        
        .sidebar { width: 280px; background: var(--sidebar-bg); padding: 30px 20px; box-shadow: 2px 0 10px var(--shadow); position: sticky; top: 80px; height: fit-content; border-right: 1px solid var(--border-color); }
        .sidebar h3 { color: var(--text-color); margin-bottom: 15px; font-size: 1.1em; }
        .sidebar ul { list-style: none; }
        .sidebar li { margin: 8px 0; }
        .sidebar a { color: var(--text-secondary); text-decoration: none; padding: 8px 12px; display: block; border-radius: 6px; transition: all 0.2s; }
        .sidebar a:hover, .sidebar a.active { background: var(--primary-color); color: white; }
        
        .content { flex: 1; padding: 40px; background: var(--content-bg); margin: 20px; border-radius: 12px; box-shadow: 0 4px 20px var(--shadow); }
        
        h1 { color: var(--text-color); font-size: 2.5em; margin-bottom: 20px; border-bottom: 3px solid var(--primary-color); padding-bottom: 15px; }
        h2 { color: var(--text-secondary); margin: 40px 0 20px 0; font-size: 1.8em; }
        h3 { color: var(--text-color); margin: 30px 0 15px 0; font-size: 1.3em; }
        
        .hero { background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; padding: 30px; border-radius: 12px; margin: 30px 0; text-align: center; }
        .hero h2 { color: white; margin-top: 0; }
        
        .integration-box { background: linear-gradient(135deg, var(--accent-color) 0%, var(--secondary-color) 100%); color: white; padding: 25px; border-radius: 12px; margin: 25px 0; }
        .integration-box h3 { color: white; margin-top: 0; font-size: 1.4em; }
        
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 25px 0; }
        .feature-card { background: var(--code-bg); padding: 20px; border-radius: 10px; border-left: 5px solid var(--primary-color); }
        .feature-card h4 { color: var(--text-color); margin-bottom: 10px; }
        
        .command-list { background: var(--command-bg); padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 5px solid var(--accent-color); }
        .command { font-family: 'Monaco', 'Consolas', monospace; background: var(--code-bg); padding: 8px 12px; margin: 5px 0; border-radius: 6px; color: var(--text-color); }
        
        pre { background: var(--code-bg); color: var(--text-color); padding: 25px; border-radius: 10px; overflow-x: auto; font-size: 14px; line-height: 1.5; margin: 20px 0; border: 1px solid var(--border-color); }
        code { background: var(--code-bg); padding: 3px 8px; border-radius: 4px; font-family: 'Monaco', 'Consolas', monospace; color: var(--primary-color); }
        
        .highlight { background: var(--command-bg); padding: 20px; border-radius: 10px; border-left: 5px solid var(--secondary-color); margin: 20px 0; }
        
        @media (max-width: 768px) {
            .container { flex-direction: column; }
            .sidebar { width: 100%; position: static; }
            .search-box input { width: 200px; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">üöÄ APIver Documentation</div>
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search documentation...">
                    <button onclick="searchContent()">üîç</button>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
            </div>
        </div>
    </header>

    <div class="container">
        <nav class="sidebar">
            <h3>üìö Navigation</h3>
            <ul>
                <li><a href="#overview" onclick="scrollTo('overview')">Overview</a></li>
                <li><a href="#installation" onclick="scrollTo('installation')">Installation</a></li>
                <li><a href="#quick-start" onclick="scrollTo('quick-start')">Quick Start</a></li>
                <li><a href="#integration" onclick="scrollTo('integration')">Express Integration</a></li>
                <li><a href="#features" onclick="scrollTo('features')">Key Features</a></li>
                <li><a href="#cli" onclick="scrollTo('cli')">CLI Commands</a></li>
                <li><a href="#architecture" onclick="scrollTo('architecture')">Architecture</a></li>
                <li><a href="#how-it-works" onclick="scrollTo('how-it-works')">How It Works</a></li>
                <li><a href="#api-reference" onclick="scrollTo('api-reference')">API Reference</a></li>
                <li><a href="#testing" onclick="scrollTo('testing')">Testing</a></li>
            </ul>
        </nav>

        <main class="content">
            <section id="overview">
                <h1>APIver - Git-like API Versioning</h1>
                <div class="hero">
                    <h2>Manage multiple API versions in a single codebase</h2>
                    <p>Zero duplication ‚Ä¢ Memory serving ‚Ä¢ Encrypted storage ‚Ä¢ 2-line Express setup</p>
                </div>
                <p>APIver allows you to manage multiple API versions without code duplication. It stores changes as encrypted patches and serves versions from memory for zero-latency production performance.</p>
            </section>

            <section id="installation">
                <h2>üì¶ Installation</h2>
                <div class="command-list">
                    <div class="command">npm install apiver</div>
                </div>
            </section>

            <section id="quick-start">
                <h2>‚ö° Quick Start</h2>
                <h3>1. Initialize & Create Versions</h3>
                <div class="command-list">
                    <div class="command">npx apiver init v1</div>
                    <div class="command">npx apiver commit -m "Initial v1"</div>
                    <div class="command">npx apiver new v2 from v1</div>
                    <div class="command">npx apiver commit -m "Enhanced v2"</div>
                </div>

                <h3>2. Create API Files</h3>
                <pre>// routes/users.js
module.exports = {
  get: (req, res) => res.json({ version: 'v1', users: ['alice'] })
};</pre>
            </section>

            <section id="integration">
                <h2>üîß Express Integration</h2>
                <div class="integration-box">
                    <h3>Only 2 Lines Required!</h3>
                    <pre style="background: rgba(255,255,255,0.1); margin-top: 15px;">const { loadVersion, versionMiddleware } = require('apiver');

loadVersion(['v1', 'v2']); // 1. Load versions into memory
app.use('/api/:version', versionMiddleware(['v1', 'v2'])); // 2. Auto-serve from routes/</pre>
                    <p style="margin-bottom: 0;"><em>Middleware automatically serves all files from routes/ folder based on version</em></p>
                </div>
            </section>

            <section id="features">
                <h2>üéØ Key Features</h2>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>‚úÖ Git-like Workflow</h4>
                        <p>Edit files directly in project root</p>
                    </div>
                    <div class="feature-card">
                        <h4>‚ö° Memory Serving</h4>
                        <p>Zero-latency version loading</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîí Encrypted Storage</h4>
                        <p>Secure patch and snapshot storage</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîß Express Integration</h4>
                        <p>2-line setup with middleware</p>
                    </div>
                    <div class="feature-card">
                        <h4>üì¶ Array Loading</h4>
                        <p>Load multiple versions simultaneously</p>
                    </div>
                    <div class="feature-card">
                        <h4>üéÆ Auto-Routing</h4>
                        <p>Automatically serves from routes/ folder</p>
                    </div>
                </div>
            </section>

            <section id="cli">
                <h2>üõ† CLI Commands</h2>
                <div class="command-list">
                    <div class="command">npx apiver init v1              # Initialize</div>
                    <div class="command">npx apiver new v2 from v1       # Create version</div>
                    <div class="command">npx apiver switch v2            # Switch version</div>
                    <div class="command">npx apiver commit -m "msg"      # Commit changes</div>
                    <div class="command">npx apiver list                 # Show versions</div>
                    <div class="command">npx apiver diff v1 v2           # Compare</div>
                    <div class="command">npx apiver hotfix v1 file.js    # Apply hotfix</div>
                </div>
            </section>

            <section id="architecture">
                <h2>üèó Architecture</h2>
                <pre>project/
‚îú‚îÄ‚îÄ routes/users.js      # Your API files (edit directly)
‚îú‚îÄ‚îÄ controllers/         # Your controllers  
‚îú‚îÄ‚îÄ .apiver/
‚îÇ   ‚îú‚îÄ‚îÄ snapshots/       # Encrypted full versions
‚îÇ   ‚îú‚îÄ‚îÄ patches/         # Incremental changes
‚îÇ   ‚îî‚îÄ‚îÄ meta.json        # Version metadata
‚îî‚îÄ‚îÄ package.json</pre>
            </section>

            <section id="how-it-works">
                <h2>üìÅ How It Works</h2>
                <div class="highlight">
                    <h4>URL Mapping</h4>
                    <pre>GET /api/v1/users ‚Üí routes/users.js (v1 version)
GET /api/v2/users ‚Üí routes/users.js (v2 version)</pre>
                    <p><em>No additional routing code needed - middleware handles everything</em></p>
                </div>
            </section>

            <section id="api-reference">
                <h2>üìñ API Reference</h2>
                <h3>loadVersion(versions)</h3>
                <p>Loads version(s) into memory cache.</p>
                <pre>// Single version
const v1Code = loadVersion('v1');

// Multiple versions
const versions = loadVersion(['v1', 'v2']);</pre>

                <h3>versionMiddleware(allowedVersions)</h3>
                <p>Express middleware for serving versioned APIs.</p>
                <pre>app.use('/api/:version', versionMiddleware(['v1', 'v2']));</pre>
            </section>

            <section id="testing">
                <h2>üß™ Testing</h2>
                <div class="highlight">
                    <div class="command">npm test  # 84/84 tests passing (100% coverage)</div>
                    <p><strong>Test Coverage:</strong> CLI commands, Runtime loading, Express integration, Array loading, Integration workflows</p>
                </div>
                
                <div class="hero">
                    <h2>üöÄ Production Ready</h2>
                    <p>100% test coverage ‚Ä¢ Zero-latency serving ‚Ä¢ Encrypted storage ‚Ä¢ Memory caching</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.querySelector('.theme-toggle');
            
            if (html.getAttribute('data-theme') === 'dark') {
                html.removeAttribute('data-theme');
                themeToggle.textContent = 'üåô';
                localStorage.setItem('theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                themeToggle.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'dark');
            }
        }
        
        // Load saved theme
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            const themeToggle = document.querySelector('.theme-toggle');
            
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.textContent = '‚òÄÔ∏è';
            } else {
                themeToggle.textContent = 'üåô';
            }
        });
        
        function scrollTo(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
            
            // Update active link
            document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
            document.querySelector(`a[href="#${sectionId}"]`).classList.add('active');
        }

        function searchContent() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const content = document.querySelector('.content');
            const sections = content.querySelectorAll('section');
            
            if (!searchTerm) return;
            
            sections.forEach(section => {
                const text = section.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    section.style.display = 'block';
                    section.scrollIntoView({ behavior: 'smooth' });
                    
                    // Highlight search term
                    const walker = document.createTreeWalker(section, NodeFilter.SHOW_TEXT);
                    let node;
                    while (node = walker.nextNode()) {
                        if (node.textContent.toLowerCase().includes(searchTerm)) {
                            const parent = node.parentNode;
                            const highlighted = node.textContent.replace(
                                new RegExp(searchTerm, 'gi'), 
                                `<mark>$&</mark>`
                            );
                            parent.innerHTML = parent.innerHTML.replace(node.textContent, highlighted);
                        }
                    }
                    return;
                }
            });
        }

        // Search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchContent();
            }
        });

        // Update active link on scroll
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section');
            const scrollPos = window.scrollY + 100;
            
            sections.forEach(section => {
                const top = section.offsetTop;
                const bottom = top + section.offsetHeight;
                const id = section.getAttribute('id');
                
                if (scrollPos >= top && scrollPos <= bottom) {
                    document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
                    document.querySelector(`a[href="#${id}"]`)?.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>